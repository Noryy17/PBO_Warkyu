@startuml
skinparam backgroundColor #FDFDFD
skinparam activity {
  BackgroundColor #BFDFFF
  BorderColor #003366
  FontColor black
  FontStyle plain
  DiamondBackgroundColor #D8E8FF
  DiamondBorderColor #003366
  StartColor #003366
  EndColor #003366
}
skinparam partition {
  BackgroundColor #EAF2FF
  BorderColor #103AA3
}

start

'=== LOGIN CUSTOMER ===
partition "Login Customer" {
  :Membuka aplikasi Digital Wakrun;
  :Login ke sistem;
  if (Login berhasil?) then (Ya)
    :Masuk ke menu utama pelanggan;
  else (Tidak)
    :Tampilkan pesan error login;
    stop
  endif
}

'=== PEMESANAN CUSTOMER ===
partition "Pemesanan Customer" {
  :Menampilkan Menu Online;
  :Memilih kategori dan melihat detail menu;

  if (Ingin memesan makanan?) then (Ya)
    :Input Nomor Meja;
    :Validasi Nomor Meja;

    if (Nomor meja valid?) then (Ya)
      :Menambahkan makanan ke pesanan;
      :Hitung Total Pesanan;

      if (Ingin menambah catatan?) then (Ya)
        :Tambah Catatan Khusus;
      endif

      if (Memiliki promo/voucher?) then (Ya)
        :Terapkan Promo/Voucher;
        :Hitung Ulang Total Pesanan;
      endif

      :Pilih Metode Pembayaran;
      :Bayar Pesanan via Payment Gateway;

      if (Pembayaran berhasil?) then (Ya)
        :Kirim Notifikasi ke Dapur;
      else (Tidak)
        :Tampilkan pesan error pembayaran;
        :Batalkan Pesanan;
      endif

    else (Tidak)
      :Tampilkan pesan meja tidak valid;
    endif
  else (Tidak)
    :Hanya melihat menu;
  endif

  :Lihat Riwayat Pesanan;
  :Logout dari sistem;
}

'=== PAYMENT GATEWAY ===
partition "Payment Gateway" {
  :Memverifikasi pembayaran;
  if (Pembayaran valid?) then (Ya)
    :Kirim status “berhasil” ke sistem;
  else (Tidak)
    :Kirim status “gagal” ke sistem;
  endif
}

'=== KITCHEN ===
partition "Kitchen" {
  :Menerima Notifikasi Pesanan;
  :Cetak Notifikasi Dapur;
  :Menyiapkan Pesanan;
  :Perbarui Status Pesanan;
}

'=== ADMIN ===
partition "Admin" {
  :Login ke sistem;
  if (Login berhasil?) then (Ya)
    :Generate Laporan Penjualan Bulanan;
    :Ekspor Laporan ke Excel;
    :Logout dari sistem;
  else (Tidak)
    :Tampilkan pesan error login;
  endif
}

stop
@enduml
